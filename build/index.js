(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var l in n)e.o(n,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:n[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,n=window.ReactDOM,l=window.wp.apiFetch;var a=e.n(l);const o=window.wp.components;function r(e){let{title:n,id:l,status:r,deleted:c}=e;const s=(0,t.useRef)(!1),[d,m]=(0,t.useState)("publish"===r),u=d?"publish":"pending";return(0,t.useEffect)((()=>{s.current?a()({path:`/wp/v2/todo/${l}`,method:"PUT",data:{status:u}}).then((()=>{})).catch((e=>console.log(e?.message))):s.current=!0}),[d,m]),(0,t.createElement)(o.__experimentalHStack,{alignment:"left",className:"single--todo"},(0,t.createElement)(o.CheckboxControl,{label:n,checked:d,onChange:m,className:d?"completed":"incomplete"}),(0,t.createElement)(o.Button,{style:{height:20},className:"delete",onClick:()=>{a()({path:`/wp/v2/todo/${l}?force=true`,method:"DELETE"}).then((()=>{c(!0)})).catch((e=>console.log(e?.message)))}},(0,t.createElement)(o.Icon,{icon:"trash",size:18,style:{color:"gray"}})))}function c(e){let{items:n,deleted:l}=e;return(0,t.createElement)(o.Card,null,(0,t.createElement)(o.CardBody,null,(0,t.createElement)(o.__experimentalVStack,null,n.map((e=>{let{id:n,title:a,status:o}=e;return(0,t.createElement)(r,{key:n,title:a.rendered,id:n,status:o,deleted:l})})))))}function s(e){let{created:n}=e;const[l,r]=(0,t.useState)("");return(0,t.createElement)(o.Card,null,(0,t.createElement)(o.CardBody,null,(0,t.createElement)(o.Flex,null,(0,t.createElement)(o.FlexBlock,null,(0,t.createElement)(o.TextControl,{label:"Todo item",onChange:e=>r(e),value:l})),(0,t.createElement)(o.Button,{isSmall:!0,style:{height:30,marginTop:14},variant:"secondary",onClick:()=>{a()({path:"/wp/v2/todo",method:"POST",data:{title:l,status:"pending"}}).then((e=>{r(""),n(!0)})).catch((e=>console.log(e?.message)))},disabled:Boolean(!l)},"Add"))))}function d(){return(0,t.createElement)(o.Card,null,(0,t.createElement)(o.CardBody,null,(0,t.createElement)(o.__experimentalVStack,null,(0,t.createElement)(o.Spinner,null),(0,t.createElement)(o.Spinner,null))))}const m=document.getElementById("app");(0,n.render)((0,t.createElement)((function(){const[e,n]=(0,t.useState)([]),[l,o]=(0,t.useState)(!1),[r,m]=(0,t.useState)(!0);return(0,t.useEffect)((()=>{a()({path:"/wp/v2/todo?status=pending,publish&per_page=100&orderby=id"}).then((e=>{n(e),m(!1)})).catch((e=>console.error(e?.message)))}),[l,o,r,m]),(0,t.createElement)("div",{className:"dash-todo-layout"},(0,t.createElement)("div",{className:"dash-todo-header"},(0,t.createElement)("div",{className:"dash-todo-title-section"},(0,t.createElement)("h1",null,"Todo"))),(0,t.createElement)("div",{className:"dash-todo-layout-body hide-if-no-js"},(0,t.createElement)(s,{created:()=>{o(!l)}}),r?(0,t.createElement)(d,null):(0,t.createElement)(c,{items:e,deleted:()=>{o(!l)}})))}),null),m)})();