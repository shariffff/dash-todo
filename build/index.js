(()=>{"use strict";var e={745:(e,t,n)=>{var o=n(850);t.s=o.createRoot,o.hydrateRoot},850:e=>{e.exports=window.ReactDOM}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=window.wp.element;window.React;var t=n(745);const o=window.wp.apiFetch;var r=n.n(o);const a=window.wp.components;function l({created:t}){const[n,o]=(0,e.useState)(),[l,i]=(0,e.useState)(""),[c,s]=(0,e.useState)("0"),d=e=>{e.preventDefault(),0!==l.trim().length&&r()({path:"/wp/v2/todo",method:"POST",data:{title:l,status:"pending",excerpt:n,menu_order:c}}).then((()=>{i(""),t(!0)})).catch((e=>console.log(e?.message)))};return(0,e.createElement)(a.Card,{style:{boxShadow:"none"}},(0,e.createElement)(a.CardBody,null,(0,e.createElement)("form",{onSubmit:d},(0,e.createElement)(a.TextControl,{autoFocus:!0,label:"Add Todo item",hideLabelFromVision:!0,placeholder:"Type here and press Enter â†µ",onChange:e=>i(e),value:l,onKeyDown:e=>{"Enter"===e.key&&d(e)},autoComplete:"off",style:{fontSize:15,minHeight:36}}),(0,e.createElement)(a.Flex,null,(0,e.createElement)(a.Flex,{justify:"flex-start",align:"start"},(0,e.createElement)(a.Dropdown,{popoverProps:{placement:"bottom-start"},renderToggle:({isOpen:t,onToggle:o})=>(0,e.createElement)(a.Button,{variant:"tertiary",onClick:o,"aria-expanded":t,icon:"calendar-alt",style:{backgroundColor:"rgba(56, 88, 233, 0.4)",minWidth:64}},n&&new Date(n)?.getDate()?.toString()),renderContent:()=>(0,e.createElement)(a.DatePicker,{style:{padding:10},currentDate:n,onChange:e=>o(e)})}),(0,e.createElement)(a.__experimentalToggleGroupControl,{isBlock:!0,hideLabelFromVision:!0,label:"Priority",value:c,onChange:e=>s(e)},(0,e.createElement)(a.__experimentalToggleGroupControlOption,{value:"3",label:"High"}),(0,e.createElement)(a.__experimentalToggleGroupControlOption,{value:"2",label:"Medium"}),(0,e.createElement)(a.__experimentalToggleGroupControlOption,{value:"1",label:"Low"}),(0,e.createElement)(a.__experimentalToggleGroupControlOption,{value:"0",label:"None"}))),(0,e.createElement)(a.Button,{variant:"tertiary",onClick:()=>{o(null),s("0")}},"Reset")))))}function i(){return(0,e.createElement)(a.__experimentalVStack,null,(0,e.createElement)(a.Spinner,null),(0,e.createElement)(a.Spinner,null))}const c=window.wp.htmlEntities,s=e=>({0:"No Priority",1:"Low",2:"Medium",3:"High"}[e]||"No Priority"),d=e=>e?new Date(e.trim()).toLocaleString("en-US",{weekday:"long",day:"numeric",month:"short"}):"",m=e=>{const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""};function u(t){const{title:n,id:o,status:l,deleted:i,priority:c,due:u,openModal:p}=t,g=(0,e.useRef)(!1),[h,E]=(0,e.useState)("publish"===l),y=h?"publish":"pending",x=s(c),w=d(m(u)),v=0!==c?"has--priority":"has--no-priority",C=""!==w?"has--due-date":"has--no-due-date",_=h?"completed":"incomplete";return(0,e.useEffect)((()=>{g.current?r()({path:`/wp/v2/todo/${o}`,method:"PUT",data:{status:y}}).then((()=>{})).catch((e=>console.log(e?.message))):g.current=!0}),[h,E]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a.__experimentalHStack,{alignment:"topLeft",className:`single--todo ${_}  ${x.toLowerCase()} ${v} ${C}`},(0,e.createElement)(a.CheckboxControl,{label:`${n}`,checked:h,onChange:E}),(0,e.createElement)("span",{className:"todo--priority"},x),(0,e.createElement)("span",{className:"due--date"},w),(0,e.createElement)(a.Button,{style:{height:20},className:"edit-todo",onClick:()=>p(t)},(0,e.createElement)(a.Icon,{icon:"edit",size:15,style:{color:"gray"}})),(0,e.createElement)(a.Button,{style:{height:20},className:"delete",onClick:()=>{r()({path:`/wp/v2/todo/${o}?force=true`,method:"DELETE"}).then((()=>{i(!0)})).catch((e=>console.log(e?.message)))}},(0,e.createElement)(a.Icon,{icon:"trash",size:15,style:{color:"gray"}}))))}function p({items:t,deleted:n}){const[o,l]=(0,e.useState)({}),[i,s]=(0,e.useState)(!1),d=e=>{s(!0),l(e)},p=()=>s(!1);return(0,e.createElement)(a.Card,{style:{boxShadow:"none"}},(0,e.createElement)(a.CardBody,null,(0,e.createElement)(a.__experimentalVStack,null,t.map((({id:t,title:o,status:r,menu_order:a,excerpt:l})=>(0,e.createElement)(u,{key:t,title:(0,c.decodeEntities)(o.rendered),id:t,status:r,deleted:n,due:l.rendered,priority:a,openModal:d})))),i&&(0,e.createElement)(a.Modal,{className:"dash-todo-modal",style:{minWidth:"600px"},onRequestClose:p,isDismissible:!1},(0,e.createElement)("form",{onSubmit:e=>{e.preventDefault(),r()({path:`/wp/v2/todo/${o.id}`,method:"PUT",data:{title:o.title,menu_order:o.priority,excerpt:o.due}}).then((()=>{n(!0),p()})).catch((e=>console.log(e?.message)))}},(0,e.createElement)(a.Flex,{align:"flex-start",gap:8},(0,e.createElement)(a.FlexBlock,null,(0,e.createElement)(a.TextareaControl,{required:!0,autoFocus:!0,label:"Description",onChange:e=>l({...o,title:e}),value:o.title,rows:16})),(0,e.createElement)(a.FlexBlock,null,(0,e.createElement)(a.__experimentalToggleGroupControl,{isBlock:!0,label:"Priority",value:String(o.priority),onChange:e=>l({...o,priority:Number(e)})},(0,e.createElement)(a.__experimentalToggleGroupControlOption,{value:"3",label:"High"}),(0,e.createElement)(a.__experimentalToggleGroupControlOption,{value:"2",label:"Medium"}),(0,e.createElement)(a.__experimentalToggleGroupControlOption,{value:"1",label:"Low"}),(0,e.createElement)(a.__experimentalToggleGroupControlOption,{value:"0",label:"None"})),(0,e.createElement)(a.DatePicker,{currentDate:o.due?new Date(m(o.due).trim().toString()):null,onChange:e=>l({...o,due:e})}))),(0,e.createElement)(a.Button,{type:"submit",variant:"primary"},"Update")))))}(0,t.s)(document.getElementById("TodoApp")).render((0,e.createElement)((function(){const[t,n]=(0,e.useState)([]),[o,a]=(0,e.useState)(!1),[c,s]=(0,e.useState)(!0),d=new URLSearchParams({_fields:"id,title,status,menu_order,excerpt",status:"pending,publish",per_page:100,orderby:"menu_order"});return(0,e.useEffect)((()=>{r()({path:`/wp/v2/todo?${d}`}).then((e=>{n(e),s(!1),s(!1)})).catch((e=>console.error(e?.message)))}),[o,a]),(0,e.createElement)("div",{className:"dash-todo-layout"},(0,e.createElement)("div",{className:"dash-todo-layout-body hide-if-no-js"},(0,e.createElement)(l,{created:()=>{a(!o)}}),c?(0,e.createElement)(i,null):(0,e.createElement)(p,{items:t,deleted:()=>{a(!o)}})))}),null))})()})();