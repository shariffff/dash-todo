(()=>{"use strict";var e={745:(e,t,n)=>{var o=n(850);t.s=o.createRoot,o.hydrateRoot},850:e=>{e.exports=window.ReactDOM}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=window.wp.element;window.React;var t=n(745);const o=window.wp.apiFetch;var a=n.n(o);const r=window.wp.components,l=e=>({0:"No Priority",1:"Low",2:"Medium",3:"High"}[e]||"No Priority"),c=e=>e?new Date(e.trim()).toLocaleString("en-US",{weekday:"long",day:"numeric",month:"short"}):"",s=e=>{const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""};function d({created:t}){const[n,o]=(0,e.useState)(),[c,s]=(0,e.useState)(""),[d,i]=(0,e.useState)("0"),m=e=>{e.preventDefault(),0!==c.trim().length&&a()({path:"/wp/v2/todo",method:"POST",data:{title:c,status:"pending",excerpt:n,menu_order:d}}).then((()=>{s(""),t(!0)})).catch((e=>console.log(e?.message)))};return(0,e.createElement)(r.Card,{style:{boxShadow:"none"}},(0,e.createElement)(r.CardBody,null,(0,e.createElement)("form",{onSubmit:m},(0,e.createElement)(r.TextControl,{autoFocus:!0,label:"Add Todo item",hideLabelFromVision:!0,placeholder:"Type here and press Enter â†µ",onChange:e=>s(e),value:c,onKeyDown:e=>{"Enter"===e.key&&m(e)},autoComplete:"off",style:{fontSize:15}}),(0,e.createElement)(r.Flex,{align:"center"},(0,e.createElement)(r.FlexBlock,null,(0,e.createElement)(r.Dropdown,{popoverProps:{placement:"bottom-start"},renderToggle:({isOpen:t,onToggle:o})=>(0,e.createElement)(r.Button,{variant:"tertiary",onClick:o,"aria-expanded":t,icon:"calendar-alt"},n&&new Date(n)?.getDate()?.toString()),renderContent:()=>(0,e.createElement)(r.DatePicker,{style:{padding:10},currentDate:n,onChange:e=>o(e)})}),(0,e.createElement)(r.Dropdown,{contentClassName:"dropdown-due-date",popoverProps:{placement:"bottom-start"},renderToggle:({isOpen:t,onToggle:n})=>(0,e.createElement)(r.Button,{variant:"tertiary",onClick:n,"aria-expanded":t,icon:"flag"},"0"!==d&&l(d)),renderContent:()=>(0,e.createElement)(r.RadioControl,{style:{},label:"Priority",selected:d,options:[{label:"High",value:"3"},{label:"Medium",value:"2"},{label:"Low",value:"1"},{label:"None",value:"0"}],onChange:e=>i(e)})})),(0,e.createElement)(r.Button,{variant:"tertiary",onClick:()=>{o(null),i("0")}},"Reset")))))}function i(){return(0,e.createElement)(r.__experimentalVStack,null,(0,e.createElement)(r.Spinner,null),(0,e.createElement)(r.Spinner,null))}const m=window.wp.htmlEntities;function u(t){const{title:n,id:o,status:d,deleted:i,priority:m,due:u,openModal:p}=t,h=(0,e.useRef)(!1),[E,g]=(0,e.useState)("publish"===d),y=E?"publish":"pending",w=l(m),v=c(s(u)),f=0!==m?"has--priority":"has--no-priority",b=""!==v?"has--due-date":"has--no-due-date",C=E?"completed":"incomplete";return(0,e.useEffect)((()=>{h.current?a()({path:`/wp/v2/todo/${o}`,method:"PUT",data:{status:y}}).then((()=>{})).catch((e=>console.log(e?.message))):h.current=!0}),[E,g]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(r.__experimentalHStack,{alignment:"topLeft",className:`single--todo ${C}  ${w.toLowerCase()} ${f} ${b}`},(0,e.createElement)(r.CheckboxControl,{label:`${n}`,checked:E,onChange:g}),(0,e.createElement)("span",{className:"todo--priority"},w),(0,e.createElement)("span",{className:"due--date"},v),(0,e.createElement)(r.Button,{style:{height:20},className:"edit-todo",onClick:()=>p(t)},(0,e.createElement)(r.Icon,{icon:"edit",size:15,style:{color:"gray"}})),(0,e.createElement)(r.Button,{style:{height:20},className:"delete",onClick:()=>{a()({path:`/wp/v2/todo/${o}?force=true`,method:"DELETE"}).then((()=>{i(!0)})).catch((e=>console.log(e?.message)))}},(0,e.createElement)(r.Icon,{icon:"trash",size:15,style:{color:"gray"}}))))}function p({items:t,deleted:n}){const[o,l]=(0,e.useState)({}),[c,s]=(0,e.useState)(!1),d=e=>{s(!0),l(e),console.log(e)},i=()=>s(!1);return(0,e.createElement)(r.Card,{style:{boxShadow:"none"}},(0,e.createElement)(r.CardBody,null,(0,e.createElement)(r.__experimentalVStack,null,t.map((({id:t,title:o,status:a,menu_order:r,excerpt:l})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(u,{key:t,title:(0,m.decodeEntities)(o.rendered),id:t,status:a,deleted:n,due:l.rendered,priority:r,openModal:d}))))),c&&(0,e.createElement)(r.Modal,{className:"dash-todo-modal",style:{minWidth:"600px"},onRequestClose:i,isDismissible:!1},(0,e.createElement)("form",{onSubmit:e=>{e.preventDefault(),a()({path:`/wp/v2/todo/${o.id}`,method:"PUT",data:{title:o.title}}).then((()=>{n(!0),i()})).catch((e=>console.log(e?.message)))}},(0,e.createElement)(r.TextareaControl,{required:!0,autoFocus:!0,label:"Update Todo item",onChange:e=>l({...o,title:e}),value:o.title}),(0,e.createElement)(r.Button,{type:"submit",variant:"primary"},"Update")))))}(0,t.s)(document.getElementById("TodoApp")).render((0,e.createElement)((function(){const[t,n]=(0,e.useState)([]),[o,r]=(0,e.useState)(!1),[l,c]=(0,e.useState)(!0),s=new URLSearchParams({_fields:"id,title,status,menu_order,excerpt",status:"pending,publish",per_page:100,orderby:"menu_order"});return(0,e.useEffect)((()=>{a()({path:`/wp/v2/todo?${s}`}).then((e=>{n(e),c(!1),c(!1)})).catch((e=>console.error(e?.message)))}),[o,r]),(0,e.createElement)("div",{className:"dash-todo-layout"},(0,e.createElement)("div",{className:"dash-todo-layout-body hide-if-no-js"},(0,e.createElement)(d,{created:()=>{r(!o)}}),l?(0,e.createElement)(i,null):(0,e.createElement)(p,{items:t,deleted:()=>{r(!o)}})))}),null))})()})();