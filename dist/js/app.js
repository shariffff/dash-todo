(()=>{"use strict";var e={"../node_modules/react-dom/client.js":(e,t,a)=>{var n=a("react-dom");t.s=n.createRoot,n.hydrateRoot},"react-dom":e=>{e.exports=window.ReactDOM}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=window.React;var t=a.n(e),n=a("../node_modules/react-dom/client.js");const r=window.wp.apiFetch;var o=a.n(r);const l=window.wp.element,c=window.wp.components,d=e=>({0:"No Priority",1:"Low",2:"Medium",3:"High"}[e]||"No Priority"),s=e=>e?new Date(e.trim()).toLocaleString("en-US",{weekday:"long",day:"numeric",month:"short"}):"",i=e=>{const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""};function m(e){let{created:t}=e;const[a,n]=(0,l.useState)(),[r,s]=(0,l.useState)(""),[i,m]=(0,l.useState)("0"),u=e=>{e.preventDefault(),0!==r.trim().length&&o()({path:"/wp/v2/todo",method:"POST",data:{title:r,status:"pending",excerpt:a,menu_order:i}}).then((()=>{s(""),t(!0)})).catch((e=>console.log(e?.message)))};return React.createElement(c.Card,null,React.createElement(c.CardBody,null,React.createElement("form",{onSubmit:u,style:{marginTop:10}},React.createElement(c.Flex,{align:"center"},React.createElement(c.FlexBlock,null,React.createElement(c.Dropdown,{popoverProps:{placement:"bottom-start"},renderToggle:e=>{let{isOpen:t,onToggle:n}=e;return React.createElement(c.Button,{variant:"tertiary",onClick:n,"aria-expanded":t,icon:"calendar-alt"},a&&new Date(a)?.getDate()?.toString())},renderContent:()=>React.createElement(c.DatePicker,{style:{padding:10},currentDate:a,onChange:e=>n(e)})}),React.createElement(c.Dropdown,{contentClassName:"dropdown-due-date",popoverProps:{placement:"bottom-start"},renderToggle:e=>{let{isOpen:t,onToggle:a}=e;return React.createElement(c.Button,{variant:"tertiary",onClick:a,"aria-expanded":t,icon:"flag"},"0"!==i&&d(i))},renderContent:()=>React.createElement(c.RadioControl,{style:{},label:"Priority",selected:i,options:[{label:"High",value:"3"},{label:"Medium",value:"2"},{label:"Low",value:"1"},{label:"None",value:"0"}],onChange:e=>m(e)})})),React.createElement(c.Button,{variant:"tertiary",onClick:()=>{n(null),m("0")}},"Reset")),React.createElement(c.TextControl,{autoFocus:!0,label:"Add Todo item",hideLabelFromVision:!0,placeholder:"Type here and press Enter \u21b5",onChange:e=>s(e),value:r,onKeyDown:e=>{"Enter"===e.key&&u(e)}}))))}function u(){return React.createElement(c.Card,null,React.createElement(c.CardBody,null,React.createElement(c.__experimentalVStack,null,React.createElement(c.Spinner,null),React.createElement(c.Spinner,null))))}const p=window.wp.htmlEntities;function E(e){let{title:t,id:a,status:n,deleted:r,priority:m,due:u}=e;const p=(0,l.useRef)(!1),[E,h]=(0,l.useState)("publish"===n),R=E?"publish":"pending",g=d(m).toLowerCase(),w=s(i(u));(0,l.useEffect)((()=>{p.current?o()({path:`/wp/v2/todo/${a}`,method:"PUT",data:{status:R}}).then((()=>{})).catch((e=>console.log(e?.message))):p.current=!0}),[E,h]);return React.createElement(c.__experimentalHStack,{alignment:"topLeft",className:`single--todo ${g}`},React.createElement(c.CheckboxControl,{label:`${t}`,checked:E,onChange:h,className:E?"completed":"incomplete"}),React.createElement("span",{className:"due--date"},w),React.createElement(c.Button,{style:{height:20},className:"delete",onClick:()=>{o()({path:`/wp/v2/todo/${a}?force=true`,method:"DELETE"}).then((()=>{r(!0)})).catch((e=>console.log(e?.message)))}},React.createElement(c.Icon,{icon:"trash",size:15,style:{color:"gray"}})))}function h(e){let{items:t,deleted:a}=e;return React.createElement(c.Card,null,React.createElement(c.CardBody,null,React.createElement(c.__experimentalVStack,null,t.map((e=>{let{id:t,title:n,status:r,menu_order:o,excerpt:l}=e;return React.createElement(React.Fragment,null,React.createElement(E,{key:t,title:(0,p.decodeEntities)(n.rendered),id:t,status:r,deleted:a,due:l.rendered,priority:o}))})))))}function R(){const[e,t]=(0,l.useState)([]),[a,n]=(0,l.useState)(!1),[r,c]=(0,l.useState)(!0),d=new URLSearchParams({_fields:"id,title,status,menu_order,excerpt",status:"pending,publish",per_page:100,orderby:"menu_order"});(0,l.useEffect)((()=>{o()({path:`/wp/v2/todo?${d}`}).then((e=>{t(e),c(!1),c(!1)})).catch((e=>console.error(e?.message)))}),[a,n]);return React.createElement("div",{className:"dash-todo-layout"},React.createElement("div",{className:"dash-todo-header"},React.createElement("div",{className:"dash-todo-title-section"},React.createElement("h1",null,"Todo"))),React.createElement("div",{className:"dash-todo-layout-body hide-if-no-js"},React.createElement(m,{created:()=>{n(!a)}}),r?React.createElement(u,null):React.createElement(h,{items:e,deleted:()=>{n(!a)}})))}(0,n.s)(document.getElementById("TodoApp")).render(t().createElement(R,null))})()})();